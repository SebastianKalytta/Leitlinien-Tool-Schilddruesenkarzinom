<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Radioiodtherapie</title>
  <style>
  * {
    box-sizing: border-box;
  }

  body {
    font-family: "Segoe UI", sans-serif;
    background: linear-gradient(135deg, #eef3ff, #d6e4ff);
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }

  h1 {
    margin-top: 2.5rem;
    margin-bottom: 1.5rem;
    color: #003366;
    text-align: center;
  }

  /* Frage-Container */
  #qa-container {
    position: relative;
    top: 2cm; 
    width: 850px;
    max-width: 90vw;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: white;
    border-radius: 16px;
    box-shadow: 0 0 25px rgba(0,0,0,0.1);
    padding: 2rem;
    z-index: 1000;
  }

  .question {
    margin-bottom: 1.5rem;
    font-size: 1.2rem;
    font-weight: bold;
    color: #003366;
  }

  /* Antwortbuttons */
  #options-box {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1rem;
  }

  #options-box button {
    background-color: #0055cc;
    color: white;
    border: none;
    padding: 0.9rem 1.8rem;
    font-size: 1rem;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.25s ease;
    box-shadow: 0 3px 6px rgba(0,0,0,0.1);
  }

  #options-box button:hover {
    background-color: #003d99;
    transform: translateY(-3px);
    box-shadow: 0 5px 12px rgba(0,0,0,0.15);
  }

  /* Verlauf der Historie */
  #history {
    margin: 8rem auto 0 auto; 
    background: white;
    width: 650px;
    max-width: 90vw;
    border-radius: 12px;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
    padding: 2rem;
    white-space: pre-line;
    font-size: 0.95rem;
    color: #333;
    text-align: left;
    min-height: 120px;
  }



    /* Info-Kästchen */
  #infos {
    display: none;
    background: #e0ebff;
    border: 1px solid #aac7ff;
    width: 950px;
    max-width: 90vw;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
    padding: 1.8rem;
    white-space: pre-line;
    font-size: 0.95rem;
    color: #003366;
    text-align: left;
    min-height: 120px;
    z-index: 10;
    margin-top: 1rem; /* Abstand direkt unter der History */
  }



  #output {
    margin-top: 2rem;
    font-weight: bold;
    font-size: 1rem;
    color: darkgreen;
    max-height: 200px;
    overflow-y: auto;
    text-align: center;
  }

    
    

  </style>
</head>
<body>
  <h1>Indikation initiale Radioiodtherapie</h1>
  <div id="qa-container">
    <div id="question-box" class="question"></div>
    <div id="options-box"></div>
    <div id="output"></div> 
    
  </div>
  <div id="history"></div>
  <div id="infos"></div>
  
  
  <script>
    const frageBox = document.getElementById("question-box");
    const optionenBox = document.getElementById("options-box");
    const ausgabe = document.getElementById("output");
    const historyBox = document.getElementById("history");
    
     // Hilfsfunktion, um Auswahl in der History anzuzeigen
    function addToHistory(text) {
      historyBox.innerText += text + "\n";
      historyBox.scrollTop = historyBox.scrollHeight;
    }

    // Array um History zu speichern
    const history = [];

    async function ausgabe_funktion(input) {
    frageBox.style.display = "none";
    optionenBox.style.display = "none";
    ausgabe.innerText =input || "Nicht bestimmt";
    return;

    }

    async function frage(text, optionen) {
      return new Promise(resolve => {
        frageBox.innerText = text;
        optionenBox.innerHTML = "";

        
        optionen.forEach(opt => {
          const btn = document.createElement("button");
          btn.innerText = opt;
          btn.onclick = () => {
            addToHistory(`${text} → ${opt}`);
            resolve(opt);
                        
          };
          optionenBox.appendChild(btn);
        });
      });
    }

    function updateHistory() {
      historyBox.innerText = history.join("\n");
    }

    async function Indikation_Radioiodtherapie() {
      

      const exzellent = "Exzellentes Ansprechen der Therapie";
      const gut = "Gutes/akzeptables Ansprechen der Therapie";
      const biochemisch = "Biochemisch unvollständgiges Ansprechen";
      const strukturell = "Strukturell unvollständiges Ansprechen";

      const sehr_niedrig = "Sehr niedriges Risiko";
      const niedrig = "Niedriges Risiko";
      const intermediär = "Intermediäres Risiko";
      const hoch = "Hohes Risiko";

      let tsh_zielbereich_final = "";
      
      const infos_risikofaktoren = 
      "• Multifokalität \n"+
      "• aggressiver Subtyp \n"+
      "• geringer Differenzierungsgrad \n"+
      "• genetisches Risikoprofil \n"+
      "• infiltratives Tumorwachstum mit Infiltration der Schilddrüsenkapsel \n"+
      "• umgebende desmoplastische Fibrose \n"+
      "• ein Tumordurchmesser ab 6 mm \n"+
      "• familiär gehäuftes Auftreten oder ein \n"+
      "• Z.n. perkutaner Vorbestrahlung der Kopf-/Halsregion\n"+
      "vgl. S. 130 der Leitlinien";
      

      let empfehlung_5_32 = 
      `Evidenzbasierte Empfehlung 5.32:
      Beim postoperativen Zufallsbefund eines papillären Mikrokarzinoms (unifokales PTMC, PTC pT1a) ohne Anhalt für lokoregionäre oder Fernmetastasen und ohne weitere Risikofaktoren soll keine weitere ablative Therapie (chirurgische Therapie oder Radioiodtherapie) erfolgen.
      Empfehlungsgrad A
      Level of Evidence: 1b
      Konsens`; 

      let empfehlung_5_33 = 
      `Evidenzbasierte Empfehlung 5.33:
      Beim PTC im Stadium pT1a mit Risikofaktoren (z. B. Multifokalität, aggressiver Subtyp, Organkapselinfiltration, genetisches Risikoprofil, perkutane Vorbestrahlung der Kopf-/Halsregion) kann nach individueller Nutzen-/Risiko Abwägung eine Radioiodtherapie angeboten werden, wenn eine Thyreoidektomie 
      erfolgt ist.
      Empfehlungsgrad 0
      Level of Evidence: 2a
      Konsens`;

      let empfehlung_5_34 = 
      `Evidenzbasierte Empfehlung 5.34:
      Beim initial lymphogen oder hämatogen metastasierten PTC pT1a (PTMC) soll nach der Thyreoidektomie eine Radioiodtherapie erfolgen. 
      Empfehlungsgrad A
      Level of Evidence: 2b
      Konsens`;
         

      let empfehlung_5_35 = 
      `Evidenzbasierte Empfehlung 5.35:
      Bei Patienten mit PTC pT1b pN0 ohne Risikofaktoren sollte keine Radioiodtherapie durchgeführt werden, wenn durch die Operation bereits ein exzellentes Ergebnis erreicht wurde, andernfalls sollen die Vor- und Nachteile einer Radioiodtherapie individuell besprochen werden. 
      Empfehlungsgrad B
      Level of Evidence: 1b
      Konsens`
      
      let kriterien_thyreoidektomie = `Für die Definition eines exzellenten Ergebnisses nach einer Thyreoidektomie können folgende Kriterien herangezogen werden: 
      • Die Entfernung einer repräsentativen Anzahl von Lymphknoten aus dem zentralen Kompartiment ohne Tumornachweis (Richtwert sind 6 entfernte und histopathologisch aufgearbeitete Lymphknoten im Tumorstadium pT1b) 
      • ein niedriger postoperativer Serum-Tg-Wert, gemessen 3-4 Wochen nach Operation (Richtwert < 0,5- 1ng/dl). Es existieren hier keine ganz sicher definierten Grenzwerte für Thyreoglobulin. In der ESTIMABL2-Studie lag die Rezidivrate bei einem Tg-Wert von >1ng/dl bei 14,6% 
      • kein Tg-Antikörper-Nachweis. Falls dies der Fall ist, kann der Tg-Wert falsch negativ sein.
      S. 135 der Leitlinie`;

      let empfehlung_5_36 = 
      `Evidenzbasierte Empfehlung 5.36:
      Bei Patienten mit PTC pT1b pN0/Nx sowie Patienten mit PTC pT2 pN0 mit prophylaktischer Kompartmentresektion sollen die Vor- und Nachteile einer Radioiodtherapie individuell besprochen werden. 
      Empfehlungsgrad A
      Level of Evidence: ++--
      Konsens`;
      
      let empfehlung_5_37 = 
      `Evidenzbasierte Empfehlung 5.37:
      Bei Patienten mit PTC pT2 pNx/1 oder pT3 sollte eine adjuvante Radioiodtherapie durchgeführt werden.
      Empfehlungsgrad B
      Level of Evidence: ++--
      Konsens`;

      
      let empfehlung_5_38= 
      `Evidenzbasierte Empfehlung 5.38:
      Beim PTC in der Risiko-Gruppe pT4 jedes N jedes M soll nach der Thyreoidektomie eine Radioiodtherapie erfolgen.
      Empfehlungsgrad A
      Level of Evidence: ++--
      Starker Konsens`; 
      
      let empfehlung_5_39 = 
      `Evidenzbasierte Empfehlung 5.39:
      Aggressive Subtypen des PTC (inkl. der großzelligen, der Kolumnarzell- und der Hobnail-Variante) sollten mit einer Radioiodtherapie behandelt werden. 
      Empfehlungsgrad B
      Level of Evidence: 2b
      Starker Konsens`;

      let empfehlung_5_40 = 
      `Konsensbasierte Empfehlung 5.40:
      Beim nach qualitätsgesicherter histopathologischer Aufarbeitung gesicherten minimal invasiven, follikulären Schilddrüsenkarzinom ohne Angioinvasion sollte keine Radiodtherapie durchgeführt werden. 
      Expertenkonsens
      Starker Konsens`

      let empfehlung_5_41 = 
      `Konsensbasierte Empfehlung 5.41:
      Beim minimal invasiven, follikulären Schilddrüsenkarzinom mit Angioinvasion sollte eine Radioiodtherapie durchgeführt werden.
      Expertenkonsens
      Starker Konsens `

      let empfehlung_5_42 = 
      `Konsensbasierte Empfehlung 5.42:
      Beim grob invasiven follikulären Schilddrüsenkarzinom soll eine Radioiodtherapie durchgeführt werden.
      Expertenkonsens
      Starker Konsens` 

      let empfehlung_resektion = 
      "Für den Status der inkompletten Resektion liegen in den Leitlinien keine direkten Empfehlungen für oder gegen eine Radioiodtherapie vor. Eine Radioiodtherapie ist aus folgenden Gründen zu diskutieren:" + "\n" +" \n" +
      "1. Nach Tabelle 16 der Leitlinien ist 'Keine R0 Resektion' ein Kriterium für ein hohes Rezidivrisiko." + "\n" +" \n" +
      "2. Zitat Seite 136 der Leitlinen: 'Ruel et al. analysiert die Daten der National Cancer Database (USA) von 1998–2006 mit Fokus auf das Rezidivrisiko bei pT3 N0 M0 bzw. pT1–3 N1 M0 (intermediäre Risikogruppe) auf der Basis von 21.870 Patienten. In der multivariaten Analyse zeigte sich für die Patienten mit adjuvanter RIT eine Reduktion der Mortalität um 29% gegenüber den Patienten ohne adjuvante RIT. Dieser deutliche Effekt fand sich trotz der Tatsache, dass sich in der Gruppe der Patienten, die einer RIT zugeführt wurden, im statistischen Mittel eine bei Diagnosestellung fortgeschrittenere Tumorausbreitung fand als bei den Patienten ohne adjuvante RIT (nichtrandomisiertes Design): So bestand bei den adjuvant therapierten Patienten im Vergleich zur nicht-adjuvant therapierten Gruppe bei Erstdiagnose eine Multifokalität bei 51% versus 47%, eine Lymphknotenmetastasierung bei 74% versus 68% und eine R1-Resektion bei 19% versus 15% der Patienten. Die Entscheidung zugunsten einer adjuvanten RIT konnte das fortgeschrittenere Tumorstadium jedoch mehr als ausgleichen und zugunsten einer verringerten Mortalität verbessern.'";
      
      let empfehlung_5_43 = 
      `Konsensbasierte Empfehlung 5.43:
      Bei Patienten mit onkozytärem Schilddrüsenkarzinom sollte einmalig überprüft werden, ob eine therapeutisch nutzbare Radioiodspeicherung vorliegt bzw. ob eine Therapierbarkeit mit Radioiod gegeben ist. Ausnahmen stellen gekapselte onkozytäre Schilddrüsenkarzinome mit wenigen Kapseldurchbrüchen und fehlender Angioinvasion dar, die durch eine Hemithyreoidektomie adäquat behandelt sind.
      Expertenkonsens
      Konsens`

      let empfehlung_5_44 = 
      `Evidenzbasierte Empfehlung 5.44:
      Bei Patienten mit schlecht differenziertem Schilddrüsenkarzinom (PDTC) und differenziert hochgradigem Schilddrüsenkarzinom (DHGTC) sollte einmalig überprüft werden, ob eine therapeutisch nutzbare Radioiodspeicherung vorliegt bzw. ob eine Therapierbarkeit mit Radioiod gegeben ist.
      Empfehlungsgrad B
      Level of Evidence: 2b
      Konsens`





      let antwort_aggr_subtyp = "";
      let antwort_metastasen = "";
      let antwort_resektion = "";
      let n; 
      let häm_metastasen;
      let t;
      let indikation = "";
      let empfehlungsgrad = ""; 
      let level_of_evidence = ""; 
      let antwort = ""; 
      


      const typ = await frage("Histologischer Typ?", ["Papillär", "Follikulär", "Onkozytär", "Schlecht differenziert (PDTC) oder differenziert hochgradig (DHGTC)"]);

      if (typ === "Onkozytär") {
        antwort = empfehlung_5_43
        frageBox.style.display = "none";
        optionenBox.style.display = "none";
        ausgabe.innerText = antwort
        return; 
      }

      if (typ === "Schlecht differenziert (PDTC) oder differenziert hochgradig (DHGTC)") {
        antwort = empfehlung_5_44
        frageBox.style.display = "none";
        optionenBox.style.display = "none";
        ausgabe.innerText = antwort
        return; 
      }






      // Papilläres Schilddrüsenkarzinom, Bestimmung der Risikoklasse
      if (typ === "Papillär") {

        t = await frage("T-Status?", ["pT1a", "pT1b", "pT2", "pT3", "pT4"]);

        if (["pT4"].includes(t)) {
          antwort = empfehlung_5_38; 
          frageBox.style.display = "none";
          optionenBox.style.display = "none";
          ausgabe.innerText = antwort
          return;          
        }

        n = await frage("Lymphogene Metastasen, N-Status?", ["NX", "N0", "N1"]);

        häm_metastasen = await frage("Liegen Fernmetastasen vor?", ["Ja", "Nein"]);
             

        if (häm_metastasen === "Ja" || n === "N1" ) {
          antwort_metastasen = empfehlung_5_34
        }
      

        let r0_resektion = await frage("Resektionsstatus des Tumors?", ["R0", "R1/R2"]);
        if (r0_resektion === "R1/R2") {
          antwort_resektion = empfehlung_resektion        
        } 


        document.getElementById("infos").textContent =
        "Für weitere Informationen zu den einzelnen Subtypen, siehe `5.8.2.5 Spezielle Histologien des PTC`";
        document.getElementById("infos").style.display = "block";
        
        let aggr_subtyp = await frage("Aggressiver Subtyp?", ["Ja", "Nein"]);
        document.getElementById("infos").style.display = "none";
        
        if (aggr_subtyp === "Ja") {
          antwort_aggr_subtyp = empfehlung_5_39;        
        }      
        
        
        document.getElementById("infos").textContent =
        "Zu den Risikofaktoren zählen u.a.: \n" + infos_risikofaktoren;
        document.getElementById("infos").style.display = "block";
        
        let risikofaktoren = await frage("Liegen Risikofaktoren vor?" , ["Ja", "Nein"]);
        document.getElementById("infos").style.display = "none";  
        
        
        if (t === "pT1a") {
         
          if (risikofaktoren === "Ja" || aggr_subtyp === "Ja") {
            antwort = empfehlung_5_33; 
          } else if (häm_metastasen === "Nein" && ["N0", "NX"].includes(n) && r0_resektion === "R0") {
            antwort = empfehlung_5_32
          }     
          
        
        } else if (t === "pT1b" && n === "N0") {
         
          document.getElementById("infos").textContent =kriterien_thyreoidektomie;
          document.getElementById("infos").style.display = "block"; 
          
          if (risikofaktoren === "Nein") {
            antwort = empfehlung_5_35 + "\n" + "\n" + empfehlung_5_36;
          } else antwort = empfehlung_5_35 + "\n" + "\n" + empfehlung_5_36;
         

        
        } else if (t === "pT1b" && ["NX"].includes(n))  {
          
          antwort = empfehlung_5_36;
          
        } else if (t === "pT2" && n === "N0") {
          
          antwort = empfehlung_5_36;    
        

        } else if ( (t === "pT2" && ["NX", "N1"].includes(n)) || t === "pT3") {
          antwort = empfehlung_5_37;                                
        } 
          

        


      

        // Follikuläres Schilddrüsenkarzinom, Bestimmung der Risikoklasse
      } else if (typ === "Follikulär") {
        const inv = await frage("Invasivität?", ["minimalinvasiv (MIFTC)", "grob invasiv (WIFTC)"]);
        let gefaess = "";
        if (inv === "minimalinvasiv (MIFTC)") {
          gefaess = await frage("Angioinvasion?", ["Nein", "Ja"]);
        }
        if (inv === "minimalinvasiv (MIFTC)" && gefaess === "Nein") antwort = empfehlung_5_40;
        else if (inv == "grob invasiv (WIFTC)") antwort = empfehlung_5_42;
        else antwort = empfehlung_5_41;
      }
  
            
      frageBox.style.display = "none";
      optionenBox.style.display = "none";
      
      
      
      ausgabe.innerText = antwort + "\n" + "\n" + antwort_aggr_subtyp + "\n" + "\n" + antwort_metastasen + "\n" + "\n" + antwort_resektion 
      
      
    }
   
  Indikation_Radioiodtherapie();
  </script>
</body>
</html>