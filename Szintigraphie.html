<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Szinti</title>
  <style>
  * {
    box-sizing: border-box;
  }

  body {
    font-family: "Segoe UI", sans-serif;
    background: linear-gradient(135deg, #eef3ff, #d6e4ff);
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }

  h1 {
    margin-top: 2.5rem;
    margin-bottom: 1.5rem;
    color: #003366;
    text-align: center;
  }

  /* Frage-Container */
  #qa-container {
    position: relative;
    top: 2cm; 
    width: 850px;
    max-width: 90vw;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: white;
    border-radius: 16px;
    box-shadow: 0 0 25px rgba(0,0,0,0.1);
    padding: 2rem;
    z-index: 1000;
  }

  .question {
    margin-bottom: 1.5rem;
    font-size: 1.2rem;
    font-weight: bold;
    color: #003366;
  }

  /* Antwortbuttons */
  #options-box {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1rem;
  }

  #options-box button {
    background-color: #0055cc;
    color: white;
    border: none;
    padding: 0.9rem 1.8rem;
    font-size: 1rem;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.25s ease;
    box-shadow: 0 3px 6px rgba(0,0,0,0.1);
  }

  #options-box button:hover {
    background-color: #003d99;
    transform: translateY(-3px);
    box-shadow: 0 5px 12px rgba(0,0,0,0.15);
  }

  /* Verlauf der Historie */
  #history {
    margin: 8rem auto 0 auto; 
    background: white;
    width: 650px;
    max-width: 90vw;
    border-radius: 12px;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
    padding: 2rem;
    white-space: pre-line;
    font-size: 0.95rem;
    color: #333;
    text-align: left;
    min-height: 120px;
  }



    /* Info-Kästchen */
  #infos {
    display: none;
    background: #e0ebff;
    border: 1px solid #aac7ff;
    width: 950px;
    max-width: 90vw;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(0,0,0,0.1);
    padding: 1.8rem;
    white-space: pre-line;
    font-size: 0.95rem;
    color: #003366;
    text-align: left;
    min-height: 120px;
    z-index: 10;
    margin-top: 1rem; 
  }



  #output {
    margin-top: 2rem;
    font-weight: bold;
    font-size: 1rem;
    color: darkgreen;
    max-height: 200px;
    overflow-y: auto;
    text-align: center;
  }



    
    

  </style>
</head>
<body>
  <h1>Indikationen für die Durchführung einer ¹³¹I-Ganzkörper-Szintigraphie 6-12 Monate nach initialer Radioiodtherapie</h1>
  <div id="qa-container">
    <div id="question-box" class="question"></div>
    <div id="options-box"></div>
    <div id="output"></div> 
    
  </div>
  <div id="history"></div>
  <div id="infos"></div>
  
  
  

  <script>
    const frageBox = document.getElementById("question-box");
    const optionenBox = document.getElementById("options-box");
    const ausgabe = document.getElementById("output");
    const historyBox = document.getElementById("history");
    
     // Hilfsfunktion, um Auswahl in der History anzuzeigen
    function addToHistory(text) {
      historyBox.innerText += text + "\n";
      historyBox.scrollTop = historyBox.scrollHeight;
    }



    // Array um History zu speichern
    const history = [];

    async function frage(text, optionen) {
      return new Promise(resolve => {
        frageBox.innerText = text;
        optionenBox.innerHTML = "";

        
        optionen.forEach(opt => {
          const btn = document.createElement("button");
          btn.innerText = opt;
          btn.onclick = () => {
            addToHistory(`${text} → ${opt}`);
            resolve(opt);
                        
          };
          optionenBox.appendChild(btn);
        });
      });
    }

    async function ausgabe_funktion(input) {
      frageBox.style.display = "none";
      optionenBox.style.display = "none";
      ausgabe.innerText =input || "Nicht bestimmt";
      return;

    }


    function updateHistory() {
      historyBox.innerText = history.join("\n");
    }

    const empfehlung_5_65 = 
    `Evidenzbasierte Empfehlung 5.65: 
    Bei TAK-Positivität sowie bei initial mittlerem oder hohem Rezidivrisiko soll nach 6 – 12 Monaten eine ¹³¹I-Ganzkörper-Szintigraphie erfolgen.
    Empfehlungsgrad A
    Level of Evidence: 2a
    Starker Konsens`;

    const empfehlung_5_66 = 
    `Evidenzbasierte Empfehlung 5.66:
    Auf eine ¹³¹I-Ganzkörper-Szintigraphie sollte verzichtet werden, wenn bereits bei der initialen RIT ein exzellentes Ergebnis vorliegt und bei im Verlauf nicht nachweisbaren hsTg- bzw. bei niedrigen fallenden hsTg-Werten. 
    Empfehlungsgrad B
    Level of Evidence: 2a
    Starker Konsens`;  

    const niedriges_risiko_tg_negativ = 
    `Zitat S. 166 der Leitlinien: 
    "Liegt hingegen bereits nach der initialen Radioiodtherapie ein exzellentes Therapieergebnis vor oder findet sich ein Thyreoglobulinwert bei Niedrig-Rezidivrisiko-Patienten unterhalb der funktionellen Assay-Sensitivität (< 0,1 – 0,2 ng/ml), so kann auf eine ¹³¹I-Ganzkörper Szintigraphie verzichtet werden."`;
    

    const niedriges_risiko_tg_positiv = 
    `Für Patienten mit negativen TAK und initial niedrigem Rezidivrisiko, die die Bedingung "Tg < 0,1 – 0,2 ng/ml" nicht erfüllen, treffen keine Empfehlungen zu, die sich gegen die Durchführung einer Szintigraphie aussprechen. Die Durchführung einer Szintigraphie kann daher diskutiert werden. 
    
    Folgende Empfehlung aus dem Fließtext kann nicht ausgesprochen werden:` + "\n" + "\n" +
    niedriges_risiko_tg_negativ + "\n" + "\n" +
    "Außerdem kann Empfehlung 5.66 ebenfalls nicht ausgesprochen werden:"  + "\n"  + "\n" +
    empfehlung_5_66;



    


    let antwort;
    let risiko;
    let tg_niedrig_risiko;


    async function main_function() {
      

      const exzellent = "Exzellentes Ansprechen der Therapie";
      const gut = "Gutes/akzeptables Ansprechen der Therapie";
      const biochemisch = "Biochemisch unvollständgiges Ansprechen";
      const strukturell = "Strukturell unvollständiges Ansprechen";
      const response_bestimmen = "Wurde noch nicht dokumentiert. Response-Kategorie jetzt bestimmen"
      const risiko_bestimmen = "Wurde noch nicht dokumentiert. Initiale Risiko-Kategorie jetzt bestimmen"

      const sehr_niedrig = "Sehr niedriges Risiko";
      const niedrig = "Niedriges Risiko";
      const intermediär = "Intermediäres Risiko";
      const hoch = "Hohes Risiko";
      

      let tsh_zielbereich_final = "";
      
      document.getElementById("infos").textContent =
      `Konsensbasierte Empfehlung 6.14:
      Zeigt die Erfolgskontrolle ≥ 6-12 Monate nach initialer RIT einen negativen Befund soll bei unauffälligem Nachsorgeverlauf keine weitere diagnostische ¹³¹I-Ganzkörperszintigraphie erfolgen.
      Expertenkonsens
      Starker Konsens`;
      document.getElementById("infos").style.display = "block";     
      const tak =  await frage("TAK Positivität?", ["Ja", "Nein"]); 
      document.getElementById("infos").style.display = "none";

      if (tak === "Ja"){
        antwort = empfehlung_5_65;        
        ausgabe_funktion(antwort); 
      }

      if (tak === "Nein") {

        let ergebnis_therapie = await frage("Welches Ergebnis lag unmittelbar nach initialer Therapie vor?", [exzellent, gut, biochemisch, strukturell]);

        if (ergebnis_therapie === biochemisch) {
        antwort = "Bei biochemisch inkomplettem Ansprechen (welches unter anderem durch einen Tg-Wert unter TSH-Unterdrückung >=1ng/ml definiert ist) treffen keine Empfehlungen zu, die sich gegen die Durchführung einer Szintigraphie aussprechen. Die Durchführung einer Szintigraphie wäre somit zu diskutieren."  + "\n"+ "\n" + 
        "Folgende Empfehlung kann nicht ausgesprochen werden:" + "\n" + "\n" +
        empfehlung_5_66 + "\n" + "\n" +
        "Außerdem ist folgendes Zitat aus der Leitlinie nicht zutreffend:" + "\n" + "\n" +
        niedriges_risiko_tg_negativ;
        ausgabe_funktion(antwort)

        }


        if (ergebnis_therapie === strukturell) {
            antwort = "Für das strukturell inkomplette Ansprechen kann Empfehlung 5.66 nicht ausgesprochen werden, die Durchführung einer Szintigraphie wäre daher zu diskutieren." + "\n" + "\n" +
            "Folgende Empfehlung kann nicht ausgesprochen werden:" + "\n" + "\n" +
            empfehlung_5_66; 
            ausgabe_funktion(antwort)

        }

        risiko =  await frage("Initiale Risikoklasse?", [sehr_niedrig, niedrig, intermediär, hoch]);
        if ([intermediär, hoch].includes(risiko)) {
          antwort = empfehlung_5_65;
          ausgabe_funktion(antwort); 
        }

        if ([niedrig, sehr_niedrig].includes(risiko)) { 
        
          
          
          if (ergebnis_therapie === exzellent) {
            let hsTg = await frage("Waren im Verlauf die hsTg-Werte unterhalb der Nachweisgrenze bzw. niedrig fallend?", ["Ja", "Nein"]);

            if (hsTg === "Ja") { 
              antwort = empfehlung_5_66;
              
              ausgabe_funktion(antwort); 
              
            } else { 
              antwort = "Empfehlung 5.66 kann aufgrund des erhöhten Tg's nicht ausgesprochen werden. Die Durchführung einer Szintigraphie wäre daher zu diskutieren.\n" + "\n" +
              "Folgende Empfehlung ist nicht zutreffend:" + "\n" + "\n" +
              empfehlung_5_66;
              ausgabe_funktion(antwort)
            }
              

          

 
          } else if  (risiko === niedrig) {// TAK negativ, niedriges Risiko
            tg_niedrig_risiko = await frage("Thyreoglobulinwert bei Niedrig-Rezidivrisiko-Patienten unterhalb der funktionellen Assay-Sensitivität (< 0,1 – 0,2 ng/ml)?", ["Ja", "Nein"]);
            if (tg_niedrig_risiko === "Ja") {
              antwort = niedriges_risiko_tg_negativ;
              ausgabe_funktion(antwort);  
              
            } else { 
              antwort = niedriges_risiko_tg_positiv; 
              ausgabe_funktion(antwort);
               
            }
          } else if (risiko === sehr_niedrig) { 
            tg_sehr_niedriges_risiko = await frage("Thyreoglobulinwert bei Niedrig-Rezidivrisiko-Patienten unterhalb der funktionellen Assay-Sensitivität (< 0,1 – 0,2 ng/ml)?", ["Ja", "Nein"]);

            if (tg_sehr_niedriges_risiko === "Ja") {
              antwort = niedriges_risiko_tg_negativ 
              ausgabe_funktion(antwort);
            } else antwort = "Für das nicht-exzellente Ansprechen mit initial sehr niedrigem Risiko und Tg Werten oberhalb der funktionellen Assay-Sensitivität (Tg < 0,1 – 0,2 ng/ml nicht erfüllt) sind keine Empfehlungen zutreffend, die sich gegen eine Szintigraphie aussprechen. Die Durchführung einer Szintigraphie wäre somit zu diskutieren." + "\n" + "\n"+
            "Die nachfolgenden Empfehlungen sind nicht zutreffend:" + "\n" + "\n" +
            empfehlung_5_66 + "\n" + "\n" +
            niedriges_risiko_tg_negativ;
            ausgabe_funktion(antwort);

            
          } else { 
          antwort = "Keine Kombination in den Leitlinien abgebildet";
          
          ausgabe_funktion(antwort);
          }
        }
        

      }
       
    }
    
    
    

   
    main_function();
  </script>
</body>
</html>

